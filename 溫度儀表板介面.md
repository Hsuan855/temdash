# 溫度儀表板專案文檔

## 功能特點

### 1. 溫度儀表板
- 半圓形設計，直徑 400 像素
- 溫度範圍：0-80°C
- 顏色編碼：
  - 冷區（0-20°C）：藍色 (#2196F3)
  - 正常區（21-40°C）：綠色 (#4CAF50)
  - 溫暖區（41-60°C）：橙色 (#FF9800)
  - 熱區（61-80°C）：紅色 (#F44336)
- 刻度標記：
  - 主刻度：每 20°C
  - 次刻度：每 5°C
  - 刻度長度：主刻度 15px，次刻度 8px
- 指針：
  - 長度：180 像素
  - 寬度：4 像素
  - 顏色：深灰色 (#333333)
  - 圓形指針頭：直徑 12 像素

### 2. 溫度區間
- 冷區 (0-19.5°C)：藍色 (#2196F3)
- 正常區 (20.5-39.5°C)：綠色 (#4CAF50)
- 溫暖區 (40.5-59.5°C)：黃色 (#FFC107)
- 高溫區 (60.5-80°C)：紅色 (#FF5722)

### 3. 刻度設計
- 每 10°C 顯示數字
- 每 5°C 顯示刻度線
- 清晰的白色刻度標示
- 0°C 和 80°C 標籤向上偏移 5 像素

### 4. 滑桿控制
#### 溫度滑桿
- 範圍：0-80°C
- 左側標示：0°C
- 右側標示：80°C
- 白色圓形滑塊

#### 濕度滑桿
- 範圍：0-100%
- 左側標示：0%
- 右側標示：100%
- 紅色背景
- 大型白色圓形滑塊 (40x40 像素)
- 滑塊內顯示當前濕度值
- 即時更新濕度顯示

### 5. 互動功能
- 滑桿控制溫度
- 模擬溫度變化按鈕
- 停止模擬按鈕
- 即時溫度標籤更新
- 濕度值即時顯示

### 6. AI 天氣分析
- 整合 WebSocket API
- 即時天氣分析功能
- 彈出式對話面板
- 顯示 AI 分析結果

### 7. 設備管理
- 設備 ID 輸入
- 自動儲存溫度數據
- 記錄時間戳記

## 技術實現

### 1. 前端技術
- HTML5
- CSS3
  - Flexbox 布局
  - CSS 變數
  - 漸變效果
  - 陰影效果
- JavaScript (ES6+)
  - Canvas API
  - WebSocket 通訊
  - 事件處理
  - 動畫效果

### 2. 視覺設計
- 配色方案
  - 主色：深灰色 (#333333)
  - 背景：白色 (#FFFFFF)
  - 溫度區間：藍、綠、橙、紅
  - 文字：深灰色 (#333333)
- 字體
  - 主要字體：Arial, sans-serif
  - 數值顯示：24px
  - 標籤文字：14px
- 間距
  - 內邊距：20px
  - 元素間距：15px
  - 邊距：10px

### 3. 互動設計
- 流暢的滑桿控制
- 即時數據更新
- 動態效果
- 使用者友善介面

## 更新日誌

### 2024-03-21
1. 改進對話面板設計
   - 實現聊天式對話介面
   - 使用者訊息使用綠色對話框
   - AI 回應使用灰色對話框
   - 優化對話氣泡樣式
   - 添加自動滾動功能
   - 改進錯誤訊息顯示

2. 優化濕度滑桿
   - 調整白色圓形滑塊尺寸為 42x42 像素
   - 修復滑桿拖曳功能
   - 優化滑桿位置計算
   - 改進視窗大小變更時的響應性

3. 新增濕度滑桿功能
   - 實現 0-100% 濕度控制
   - 添加大型白色圓形滑塊
   - 即時顯示濕度數值
   - 優化滑桿視覺效果

4. 優化溫度範圍
   - 調整溫度區間範圍
   - 更新顏色方案
   - 改進刻度顯示
   - 優化指針動畫

5. 改進使用者介面
   - 添加滑桿兩端標籤
   - 優化視覺效果
   - 改進互動體驗
   - 優化響應式設計

6. 整合 AI 功能
   - 實現天氣分析功能
   - 添加 WebSocket 通訊
   - 優化對話面板
   - 改進錯誤處理

# 溫度儀表板設計規格

## 基本規格
- 溫度範圍：0°C 至 80°C
- 顯示方式：半圓形儀表板
- 主要顏色：紫色藍色 (#5865F2)
- 背景設計：毛玻璃效果 (backdrop-filter: blur)

## 介面元素

### 1. 儀表板主體
- 半圓形設計，直徑建議為 300px
- 背景色：紫色藍色 (#5865F2)
- 毛玻璃效果背景
- 圓角設計 (border-radius: 1rem)

### 2. 溫度區間設計
- 冷區 (0-20°C)：藍色 (#2196F3)
- 正常區 (21-40°C)：綠色 (#4CAF50)
- 溫暖區 (41-60°C)：橙色 (#FF9800)
- 高溫區 (61-80°C)：紅色 (#F44336)

### 3. 刻度設計
- 主刻度：每 10°C 一個主刻度，顯示數字
- 次刻度：每 5°C 一個次刻度，不顯示數字
- 刻度顏色：白色
- 刻度標籤：0°C、10°C、20°C、30°C、40°C、50°C、60°C、70°C、80°C

### 4. 指針設計
- 顏色：紅色 (#ff0000)
- 寬度：4px
- 長度：儀表板半徑的 80%
- 指針頭部：圓形，直徑 8px

### 5. 溫度顯示
- 位置：儀表板下方
- 字體：Arial 或無襯線字體
- 字體大小：2.5rem
- 顏色：白色
- 顯示格式：XX°C
- 溫度區間標籤：Cold Zone、Normal Zone、Warm Zone、Hot Zone

### 6. 控制元素
- 溫度滑桿：
  - 漸層顏色背景
  - 圓形滑動按鈕
  - 高度：8px
  - 滑動按鈕大小：20px x 20px

- 模擬按鈕：
  - 模擬溫度變化按鈕（紫色藍色）
  - 停止模擬按鈕（紫色）
  - 懸浮效果：上浮和陰影

## 互動功能
- 滑桿控制溫度值
- 模擬溫度變化（每 2 秒更新一次）
- 停止模擬功能
- 指針平滑動畫效果
- 溫度區間標籤即時更新

## 試算表整合功能

### 1. API 端點
- 基礎 URL：https://hshgpt.webduino.tw/
- 試算表 URL：https://docs.google.com/spreadsheets/d/1IHBseQ8vk_YpzsXAYUXVZlFM44LgcEEc3Ea4oik_x4U/edit?gid=0#gid=0

### 2. 資料儲存格式
當溫度值改變時，將以下資料儲存到試算表：
- 設備 ID
- 溫度數值
- 時間戳記

### 3. API 呼叫時機
- 當滑桿數值改變時
- 當模擬溫度更新時
- 當設備 ID 變更時

### 4. 資料格式
```json
{
  "url": "試算表URL",
  "values": ["設備ID", "溫度值", "時間戳記"]
}
```

### 5. 錯誤處理
- API 呼叫失敗時的錯誤提示
- 網路連線中斷的處理機制
- 資料同步失敗的備份機制

## 響應式設計
- 支援不同螢幕尺寸
- 最小顯示尺寸：250px x 125px
- 最大顯示尺寸：300px x 150px
- 移動裝置適配：
  - 圖例垂直排列
  - 按鈕垂直排列
  - 調整內邊距

## 技術實現建議
- 使用 HTML5 Canvas 繪製儀表板
- 使用 CSS3 實現動畫和毛玻璃效果
- 使用 JavaScript 處理數據更新和動畫
- 使用 Fetch API 進行試算表資料同步
- 實作錯誤重試機制 